<!DOCTYPE html>
<html>
<head>
	<title>SpotiPi - Rasberry Pi Spotify/S_NOS Emulator</title>

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, user-scalable=no," />

	<link rel="stylesheet" href="/css/icons.css"></head>
	<link rel="stylesheet" href="/css/app.css"></head>
	
	<link href='http://fonts.googleapis.com/css?family=Nunito:300' rel='stylesheet' type='text/css'>
	<!-- <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'> -->

	<!-- application code -->
	<script src="/javascripts/library/require.js"></script>
	<script src="/javascripts/main.js"></script>

	<script type="x-template" id="tpl-header">
		<h1>Spoti<span>Pi</span></h1>
		<a class="rooms">ROOMS <span>&#x25bc;</span></a>
		<a class="search icon-search {{#unless isReady}}disabled{{/unless}}"></a>
		<a class="playlist icon-menu {{#unless isReady}}disabled{{/unless}}"></a>
	</script>

	<script type="x-template" id="tpl-login">
		<form id="form-user-login" method="post">
			<fieldset>
				<p>Please supply your Spotify username and password (these are encrypted and not stored in plain text).</p>
				<p class="sub">App-specific passwords will be supported in later versions.</p>
				<label for="username">
					<input type="textfield" name="username" id="username" placeholder="Spotify Username" />
				</label>
				<label for="password">
					<input type="password" name="password" id="password" placeholder="Spotify Password" />
				</label>
				<button class="standard" id="save-credentials">
					<span class="icon-spotify"></span>SAVE DETAILS
				</button>
			</fieldset>
		</form>
	</script>

	<script type="x-template" id="tpl-artwork">
		<h2>{{model.track.artist}}</h2>
		<h3>{{model.track.name}}</h3>
		<span class="icon-spotify"></span>
	</script>

	<script type="x-template" id="tpl-scrubber">
		<span class="progress{{scrubberPosition}}"></span>
	</script>	

	<script type="x-template" id="tpl-controls">
		<li><a class="previous icon-previous" href="#"></a></li>
		<li class="middle">
			<a class="play {{^playing}}icon-play{{/playing}}{{#playing}}icon-pause{{/playing}}" href="#"></a>
		</li>
		<li><a class="next icon-next" href="#"></a></li>
	</script>	

	<script type="x-template" id="tpl-playlist">
		<div>
			{{room.name}} / Tracks: {{room.playlist.length}}
			<ul class="no-border" id="playlist-options">
				<li class="control-shuffle icon-shuffle{{#if model.shuffle}} active{{/if}}"></li>
				<li class="control-loop icon-loop{{#if model.loop}} active{{/if}}"></li>
			</ul>
		</div>
		<ul class="scrollable">
			{{#if playlist.length}}
				{{#each playlist}}
					<li>
						<a class="track" href="javascript:void(0);" data-uri="{{uri}}">{{artist}} / {{name}}</a>
					</li>
				{{/each}}
			{{else}}
				<li class="disabled">No tracks in playlist.</li>
			{{/if}}
		</ul>
	</script>

	<script type="x-template" id="tpl-search">
		<form>
			<label>
				<input 	id="master-search" 
						type="text" 
						autocomplete="off" 
						placeholder="Search term or Spotify URI" 
						value="{{searchTerm}}" />
			</label>
		</form>
		<ul class="scrollable">
			<!-- artists -->
			<li class="result-artist subtitle icon-circle-down{{#unless artists.length}} disabled{{/unless}}">Artists {{#if artists.length}}({{artists.length}}){{/if}}</li>
			{{#each artists}}
				<li>
					<a class="artist" href="javascript:void(0);" data-uri="{{id}}">
						{{name}}
						<img src="https://d3rt1990lpmkn.cloudfront.net/cover/{{portrait.0.small}}" />
					</a>
				</li>
			{{/each}}

			<!-- albums -->
			<li class="result-album subtitle icon-circle-down{{#unless albums.length}} disabled{{/unless}}">Albums {{#if albums.length}}({{albums.length}}){{/if}}</li>
			{{#each albums}}
				<li>
					<a class="album" href="javascript:void(0);" data-uri="{{id}}">
						{{artist-name}} / {{name}}
						<img src="https://d3rt1990lpmkn.cloudfront.net/cover/{{cover-small}}" />
					</a>
				</li>
			{{/each}}

			<!-- tracks -->
			<li class="result-track subtitle icon-circle-down{{#unless tracks.length}} disabled{{/unless}}">Tracks {{#if tracks.length}}({{tracks.length}}){{/if}}</li>
			{{#each tracks}}
				<li>
					<a class="track" href="javascript:void(0);" data-uri="{{id}}">
						{{artist}} / {{title}}
						<img src="https://d3rt1990lpmkn.cloudfront.net/cover/{{cover-small}}" />
					</a>
				</li>
			{{/each}}
		</ul>
	</script>

	<script type="x-template" id="tpl-rooms">
		<p>Rooms ({{rooms.length}})</p>
		<ul>
			{{#each rooms}}
				<li data-id="{{_id}}">
					<label>Room:</label> {{name}} 
					<span class="room-remove icon-cancel-circle"></span> 
					<span class="playing {{#if playing}}icon-pause2{{/if}}{{^if playing}}icon-play2{{/if}}"></span>
					<section class="now-playing {{^if playing}}paused{{/if}}" style="background-image:url('{{track.artwork}}');">
						{{#if playlist.length}}
							<p>{{track.artist}}</p>
							<p>{{track.name}}</p>
						{{/if}}
						{{^if playlist.length}}
							<p>Playlist is empty</p>
						{{/if}}
					</section>
				</li>
			{{/each}}
		</ul>
		{{^if rooms.length}}
			<button class="room-add standard">
				<span class="icon-home"></span>
				Add Room
			</button>
		{{/if}}
		{{#if rooms.length}}
			<button class="standard disabled">
				<span class="icon-cancel-circle"></span>
				1 Zone Maximum!
			</button>
		{{/if}}
	</script>	


	<script type="x-template" id="tpl-floater">
		<span class="close icon-cancel-circle">&nbsp;</span>
		<ul>
			{{#if options.playTrack}}
				<li><a class="play-track">Play track</a></li>
			{{/if}}

			{{#if options.playAlbum}}
				<li><a class="play-album">Play album</a></li>
			{{/if}}

			{{#if options.replaceQueue}}
				<li><a class="replace-playlist">Replace playlist</a></li>
			{{/if}}

			{{#if options.cueTrack}}
				<li><a class="queue-track">Play Next</a></li>
			{{/if}}
		</ul>
	</script>


	<script type="x-template" id="tpl-alert">
		<div class="alert-controls">
			<!--<span class="close icon-cancel-circle">&nbsp;</span>-->
			<p>{{message}}</p>
			<button class="confirm">OK</button>
		</div>
	</script>
</head>
<body>
	<div id="container"></div>
</body>
</html>

